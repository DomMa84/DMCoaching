---
// src/components/Icon.astro v1.0 (Server-Mode & TypeScript optimiert)
// Universal Icon Component - Wiederverwendbar & Performance optimiert

// ‚úÖ WICHTIG: Komponenten brauchen kein prerender - automatisch statisch im Server-Mode

interface Props {
  iconPath: string;
  fillRule?: string;
  clipRule?: string;
  className?: string;
  viewBox?: string;
  size?: "xs" | "sm" | "md" | "lg" | "xl" | "2xl";
  ariaLabel?: string; // SEO & Accessibility
  role?: "img" | "presentation";
  strokeWidth?: string;
  fill?: "currentColor" | "none";
}

const { 
  iconPath, 
  fillRule = "", 
  clipRule = "", 
  className = "", 
  viewBox = "0 0 24 24",
  size = "md",
  ariaLabel,
  role = ariaLabel ? "img" : "presentation",
  strokeWidth,
  fill = "currentColor"
} = Astro.props;

// Erweiterte Gr√∂√üenklassen f√ºr bessere Flexibilit√§t
const sizeClasses = {
  xs: "w-3 h-3",    // 12px - F√ºr kleine Buttons/Badges
  sm: "w-4 h-4",    // 16px - F√ºr Text-Inline Icons
  md: "w-6 h-6",    // 24px - Standard f√ºr UI
  lg: "w-8 h-8",    // 32px - F√ºr Cards/Sections
  xl: "w-10 h-10",  // 40px - F√ºr Hero-Bereiche
  "2xl": "w-12 h-12" // 48px - F√ºr gro√üe Feature-Icons
};

const combinedClasses = `${sizeClasses[size]} text-primary-gold ${className}`.trim();

console.log(`üé® Icon v1.0 loaded - Size: ${size}, Role: ${role}`);
---

<svg 
  xmlns="http://www.w3.org/2000/svg" 
  viewBox={viewBox} 
  fill={fill}
  class={combinedClasses}
  aria-hidden={role === "presentation" ? "true" : "false"}
  role={role}
  aria-label={ariaLabel}
  stroke-width={strokeWidth}
>
  <path 
    d={iconPath} 
    fill-rule={fillRule || undefined}
    clip-rule={clipRule || undefined}
  />
</svg>

<style>
  /* Performance-Optimierung f√ºr Icons */
  svg {
    flex-shrink: 0;
    display: inline-block;
    vertical-align: middle;
  }
  
  /* Hover-Effekte f√ºr interaktive Icons */
  .icon-interactive {
    transition: transform 0.2s ease-in-out, color 0.2s ease-in-out;
  }
  
  .icon-interactive:hover {
    transform: scale(1.1);
    color: var(--primary-gold-hover, #B8943A);
  }
  
  /* Dark Mode Unterst√ºtzung */
  @media (prefers-color-scheme: dark) {
    svg {
      filter: brightness(1.1);
    }
  }
  
  /* Accessibility - Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .icon-interactive {
      transition: none;
    }
    
    .icon-interactive:hover {
      transform: none;
    }
  }
  
  /* Footer version info */
  .footer-version::after {
    content: "Icon Component v1.0 - Server-Mode & TypeScript optimiert";
  }
</style>